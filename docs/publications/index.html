<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Maxime Fosset - Publications</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Maxime Fosset</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../publications/index.html" aria-current="page"> 
<span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../cv/index.html"> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../blog/404.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://x.com/MaximeFosset"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/MFosset"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:max.fosset@gmail.com"> <i class="bi bi-envelope" role="img" aria-label="email">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://scholar.google.com/citations?user=Eh8RiMIAAAAJ&amp;hl=en"> <i class="bi bi-google scholar" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Publications</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div id="about-block">

</div>
<!-- Template -->
<!-- ## The Languages of Middle-earth -->
<!-- <img src="project_1_banner.png" style="height: 100%; width: 100%; object-fit: contain" onclick="window.open('https://arxiv.org/abs/2210.07278', 'blank');"/> -->
<!-- <a href="https://arxiv.org/abs/2210.07278" target="_blank">arXiv Preprint</a> | <a href="https://github.com/marvinschmitt/MetaUncertaintyPaper" target="_blank">Code</a><br> -->
<!-- Over the centuries, I have devoted countless hours to deciphering and translating the ancient scripts and dialects of the various peoples of Middle-earth. My goal is to gain a deeper understanding of the cultures and histories of these peoples by studying their languages. Currently, I am working on a monograph that explores the linguistic roots of the Elvish languages. Through extensive research and analysis, I hope to shed light on the connections between the different dialects of Elvish and their origins. This project has been particularly challenging, as Elvish is a complex and nuanced language, but I am determined to see it through to completion. -->
<section id="early-and-late-effects-of-volatile-sedation-with-sevoflurane-on-respiratory-mechanics-of-critically-ill-copd-patients" class="level2">
<h2 class="anchored" data-anchor-id="early-and-late-effects-of-volatile-sedation-with-sevoflurane-on-respiratory-mechanics-of-critically-ill-copd-patients">Early and late effects of volatile sedation with sevoflurane on respiratory mechanics of critically ill COPD patients</h2>
<p><img src="aic_logo.png" style="height: 100%; width: 100%; object-fit: contain" onclick="window.open('https://link.springer.com/article/10.1186/s13613-024-01311-4', 'blank');"></p>
<p><a href="https://link.springer.com/article/10.1186/s13613-024-01311-4" target="_blank">Article</a></p>
<p><strong>Abstract</strong></p>
<p><strong>Background</strong> The objective was to compare sevoflurane, a volatile sedation agent with potential bronchodilatory properties, with propofol on respiratory mechanics in critically ill patients with COPD exacerbation.</p>
<p><strong>Methods</strong> Prospective study in an ICU enrolling critically ill intubated patients with severe COPD exacerbation and comparing propofol and sevoflurane after 1:1 randomisation. Respiratory system mechanics (airway resistance, PEEPi, trapped volume, ventilatory ratio and respiratory system compliance), gas exchange, vitals, safety and outcome were measured at inclusion and then until H48. Total airway resistance change from baseline to H48 in both sevoflurane and propofol groups was the main endpoint.</p>
<p><strong>Results</strong> Sixteen patients were enrolled and were sedated for 126 h(61–228) in the propofol group and 207 h(171–216) in the sevoflurane group. At baseline, airway resistance was 21.6cmH2O/l/s(19.8–21.6) in the propofol group and 20.4cmH2O/l/s(18.6–26.4) in the sevoflurane group, (p = 0.73); trapped volume was 260 ml(176–290) in the propofol group and 73 ml(35–126) in the sevoflurane group, p = 0.02. Intrinsic PEEP was 1.5cmH2O(1–3) in both groups after external PEEP optimization. There was neither early (H4) or late (H48) significant difference in airway resistance and respiratory mechanics parameters between the two groups.</p>
<p><strong>Conclusions</strong> In critically ill patients intubated with COPD exacerbation, there was no significant difference in respiratory mechanics between sevoflurane and propofol from inclusion to H4 and H48. —-</p>
</section>
<section id="adjustments-of-ventilator-parameters-during-operating-roomtoicu-transition-and-28-day-mortality" class="level2">
<h2 class="anchored" data-anchor-id="adjustments-of-ventilator-parameters-during-operating-roomtoicu-transition-and-28-day-mortality">Adjustments of Ventilator Parameters during Operating Room–to–ICU Transition and 28-Day Mortality</h2>
<p><img src="ajrccm_logo.png" style="height: 100%; width: 100%; object-fit: contain" onclick="window.open('https://www.atsjournals.org/doi/abs/10.1164/rccm.202307-1168OC', 'blank');"></p>
<p><a href="https://www.atsjournals.org/doi/abs/10.1164/rccm.202307-1168OC" target="_blank">Article</a></p>
<p><strong>Abstract</strong></p>
<p><strong>Rationale</strong> Lung-protective mechanical ventilation strategies have been proven beneficial in the operating room (OR) and the ICU. However, differential practices in ventilator management persist, often resulting in adjustments of ventilator parameters when transitioning patients from the OR to the ICU.</p>
<p><strong>Objectives</strong> To characterize patterns of ventilator adjustments during the transition of mechanically ventilated surgical patients from the OR to the ICU and assess their impact on 28-day mortality.</p>
<p><strong>Methods</strong> Hospital registry study including patients undergoing general anesthesia with continued, controlled mechanical ventilation in the ICU between 2008 and 2022. Ventilator parameters were assessed 1 hour before and 6 hours after the transition.</p>
<p><strong>Measurements and Main Results</strong> Of 2,103 patients, 212 (10.1%) died within 28 days. Upon OR-to-ICU transition, VT and driving pressure decreased (−1.1 ml/kg predicted body weight [IQR, −2.0 to −0.2]; P &lt; 0.001; and −4.3 cm H2O [−8.2 to −1.2]; P &lt; 0.001). Concomitantly, respiratory rates increased (+5.0 breaths/min [2.0 to 7.5]; P &lt; 0.001), resulting overall in slightly higher mechanical power (MP) in the ICU (+0.7 J/min [−1.9 to 3.0]; P &lt; 0.001). In adjusted analysis, increases in MP were associated with a higher 28-day mortality rate (adjusted odds ratio, 1.10; 95% confidence interval, 1.06–1.14; P &lt; 0.001; adjusted risk difference, 0.7%; 95% confidence interval, 0.4–1.0, both per 1 J/min).</p>
<p><strong>Conclusion</strong> During transition of mechanically ventilated patients from the OR to the ICU, ventilator adjustments resulting in higher MP were associated with a greater risk of 28-day mortality. —-</p>
</section>
<section id="inflammatory-subphenotypes-in-patients-at-risk-of-ards-evidence-from-the-lips-a-trial" class="level2">
<h2 class="anchored" data-anchor-id="inflammatory-subphenotypes-in-patients-at-risk-of-ards-evidence-from-the-lips-a-trial">Inflammatory subphenotypes in patients at risk of ARDS: evidence from the LIPS-A trial</h2>
<p><img src="intensive_care_medicine_logo.png" style="height: 100%; width: 100%; object-fit: contain" onclick="window.open('https://link.springer.com/article/10.1007/s00134-023-07244-z', 'blank');"></p>
<p><a href="https://link.springer.com/article/10.1007/s00134-023-07244-z" target="_blank">Article</a></p>
<p><strong>Abstract</strong></p>
<p><strong>Purpose</strong> Latent class analysis (LCA) has identified hyper- and non-hyper-inflammatory subphenotypes in patients with acute respiratory distress syndrome (ARDS). It is unknown how early inflammatory subphenotypes can be identified in patients at risk of ARDS. We aimed to test for inflammatory subphenotypes upon presentation to the emergency department.</p>
<p><strong>Methods</strong> LIPS-A was a trial of aspirin to prevent ARDS in at-risk patients presenting to the emergency department. In this secondary analysis, we performed LCA using clinical, blood test, and biomarker variables.</p>
<p><strong>Results</strong> Among 376 (96.4%) patients from the LIPS-A trial, two classes were identified upon presentation to the emergency department (day 0): 72 (19.1%) patients demonstrated characteristics of a hyper-inflammatory and 304 (80.9%) of a non-hyper-inflammatory subphenotype. 15.3% of patients in the hyper- and 8.2% in the non-hyper-inflammatory class developed ARDS (p = 0.07). Patients in the hyper-inflammatory class had fewer ventilator-free days (median [interquartile range, IQR] 28[23–28] versus 28[27–28]; p = 0.010), longer intensive care unit (3[2–6] versus 0[0–3] days; p &lt; 0.001) and hospital (9[6–18] versus 5[3–9] days; p &lt; 0.001) length of stay, and higher 1-year mortality (34.7% versus 20%; p = 0.008). Subphenotypes were identified on day 1 and 4 in a subgroup with available data (n = 244). 77.9% of patients remained in their baseline class throughout day 4. Patients with a hyper-inflammatory subphenotype throughout the study period (n = 22) were at higher risk of ARDS (36.4% versus 10.4%; p = 0.003).</p>
<p><strong>Conclusion</strong> Hyper- and non-hyper-inflammatory subphenotypes may precede ARDS development, remain identifiable over time, and can be identified upon presentation to the emergency department. A hyper-inflammatory subphenotype predicts worse outcomes.</p>
<hr>
</section>
<section id="long-term-outcome-of-severe-metabolic-acidemia-in-icu-patients-a-bicar-icu-trial-post-hoc-analysis" class="level2">
<h2 class="anchored" data-anchor-id="long-term-outcome-of-severe-metabolic-acidemia-in-icu-patients-a-bicar-icu-trial-post-hoc-analysis">Long-term outcome of severe metabolic acidemia in ICU patients, a BICAR-ICU trial post hoc analysis</h2>
<p><img src="critical_care_medicine_logo.png" style="height: 100%; width: 100%; object-fit: contain" onclick="window.open('https://journals.lww.com/ccmjournal/abstract/2023/01000/long_term_outcome_of_severe_metabolic_acidemia_in.23.aspx?context=featuredarticles&amp;collectionid=3', 'blank');"></p>
<p><a href="https://journals.lww.com/ccmjournal/abstract/2023/01000/long_term_outcome_of_severe_metabolic_acidemia_in.23.aspx?context=featuredarticles&amp;collectionid=3" target="_blank">Article</a></p>
<p><strong>ABSTRACT</strong></p>
<p><strong>Objectives</strong> Long-term prognosis of ICU survivors is a major issue. Severe acidemia upon ICU admission is associated with very high short-term mortality. Since the long-term prognosis of these patients is unknown, we aimed to determine the long-term health-related quality of life and survival of these patients.</p>
<p><strong>Design</strong> Post hoc analysis of a multicenter, randomized, controlled trial.</p>
<p><strong>Setting</strong> Twenty-six French ICUs.</p>
<p><strong>Patients</strong> Day 28 critically ill survivors admitted with severe acidemia and enrolled in the BICAR-ICU trial.</p>
<p><strong>Intervention</strong> Sodium bicarbonate versus no sodium bicarbonate infusion according to the randomization group.</p>
<p><strong>Measurements and main results</strong> The primary outcome was health-related quality of life (HRQoL) measured with the 36-item Short Form Health Survey and the EuroQol 5-D questionnaires. Secondary outcomes were mortality, end-stage renal disease treated with renal replacement therapy or renal transplantation, place of residence, professional status, and ICU readmission. HRQoL was reduced with no significant difference between the two groups. HRQoL was reduced particularly in the role-physical health domain (64/100 ± 41 in the control group and 49/100 ± 43 in the bicarbonate group, p = 0.28), but it was conserved in the emotional domains (96/100 ± 19 in the control group and 86/100 ± 34 in the bicarbonate group, p = 0.44). Forty percent of the survivors described moderate to severe problems walking, and half of the survivors described moderate to severe problems dealing with usual activities. Moderate to severe anxiety or depression symptoms were present in one third of the survivors. Compared with the French general population, HRQoL was decreased in the survivors mostly in the physical domains. The 5-year overall survival rate was 30% with no significant difference between groups.</p>
<p><strong>Conclusions</strong> Long-term HRQoL was decreased in both the control and the sodium bicarbonate groups of the BICAR-ICU trial and was lower than the general population, especially in the physical domains.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p><span class="faux-block">© 2024 Maxime Fosset CC BY-SA 4.0</span></p>
</div>   
    <div class="nav-footer-center">
<p><span class="faux-block"><a href="https://www.marvinschmitt.com/blog/website-tutorial-quarto/">View the tutorial for this template!</a></span></p>
</div>
    <div class="nav-footer-right">
<p><span class="faux-block"><a href="https://github.com/marvinschmitt/quarto-website-template/">View source on GitHub</a></span></p>
</div>
  </div>
</footer>




</body></html>